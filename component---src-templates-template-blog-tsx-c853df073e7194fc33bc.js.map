{"version":3,"sources":["webpack://aureliendud-website/./src/partials/blog/comments.tsx","webpack://aureliendud-website/./src/partials/blog/cover.tsx","webpack://aureliendud-website/./src/components/publisherInfo.tsx","webpack://aureliendud-website/./src/templates/template-blog.tsx"],"names":["comments","useRef","useState","isReady","setIsReady","useEffect","current","scriptTag","document","createElement","async","src","setAttribute","appendChild","className","ref","coverStyle","css","coverImgStyles","coverImage","copyright","coverEl","parallax","scroll","mov","elBound","handleScroll","event","preventDefault","window","scrollY","height","Math","max","round","opacity","sign","style","transform","toString","getBoundingClientRect","addEventListener","removeEventListener","overflow","cx","G","image","title","alt","avatarBg","date","category","data","readingArea","wordsCounter","setWordsCounter","model","formatPost","mdx","cover","getImage","meta","type","handleWordsCounter","content","y","windowH","innerHeight","floor","width","coverCopy","body","MDXProvider","components","mdxComponents","MDXRenderer"],"mappings":"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","file":"component---src-templates-template-blog-tsx-c853df073e7194fc33bc.js","sourcesContent":["import React, { FunctionComponent, useState, useRef, useEffect } from 'react'\n\n/**\n * Settings\n */\nconst pluginApi = 'https://utteranc.es/client.js'\nconst websiteRepo = 'AurelienDud/AurelienDud.github.io'\nconst githubLabel = 'comments'\nconst githubTitle = 'pathname'\nconst commentsTheme = 'preferred-color-scheme'\n\n/**\n * Override Utterances styles\n * this is ugly but the plugin seems not provide a way to customize its container styles\n * and set an arbitrary max-width\n */\nconst forceStyles = `\n  .utterances {\n    max-width: 100% !important;\n  }\n`\n\n/**\n * Comments component\n */\nconst Comments:FunctionComponent = () => {\n  const comments = useRef<HTMLDivElement>(null)\n  const [isReady, setIsReady] = useState(false)\n\n  useEffect(() => {\n    if (comments?.current && !isReady) {\n      const scriptTag = document.createElement('script')\n      scriptTag.async = true\n      scriptTag.src = pluginApi\n      scriptTag.setAttribute('repo', websiteRepo)\n      scriptTag.setAttribute('issue-term', githubTitle)\n      scriptTag.setAttribute('theme', commentsTheme)\n      scriptTag.setAttribute('label', githubLabel)\n      scriptTag.setAttribute('async', 'true')\n      scriptTag.setAttribute('crossorigin', 'anonymous')\n      scriptTag.setAttribute('reverse-order', 'true')\n      scriptTag.setAttribute('input-position-top', 'true')\n\n      comments.current.appendChild(scriptTag)\n      setIsReady(true)\n    }\n  }, [comments])\n\n  return (\n    <>\n      <style>{forceStyles}</style>\n      <div className='w-100' ref={comments} />\n    </>\n  )\n}\n\nexport default Comments\n","import React, { FunctionComponent, useRef, useEffect } from \"react\"\nimport { css, cx } from '@emotion/css'\nimport { GatsbyImage, IGatsbyImageData } from \"gatsby-plugin-image\"\n\n/**\n * Type\n */\ninterface IBlogCover {\n  coverImage: IGatsbyImageData,\n  copyright?: string\n}\n\ninterface IParallax {\n  scroll: number,\n  mov: number,\n  elBound: DOMRect|null,\n}\n\n/**\n * Settings\n */\nconst parallaxStrength:number = 1.25\n\n\n/**\n * Styles\n */\nconst coverStyle = css`\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0px -40px 40px -40px inset #00000030;\n  &:after {\n    content: \"\";\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    border-top: solid 2vw transparent;\n    border-bottom: solid 2vw white;\n    border-left: solid 50vw white;\n    border-right: solid 50vw white;\n  }\n`\n\nconst coverImgStyles = css`\n  position: relative;\n  border-radius: 5px;\n  border-top: solid 6px white;\n  border-right: solid 6px white;\n  border-left: solid 6px white;\n  transform-origin: center;\n  transform: translate3d(0, 0, 0);\n  -webkit-transform-style: preserve-3d;\n  -webkit-backface-visibility: hidden;\n  transition: all 0s 0s;\n  background-color: #ffffff30;\n  opacity: 1;\n  transition: opacity linear 0.4s;\n  box-shadow: rgb(0 0 0 / 33%) 0px -45px 20px -20px inset;\n`\n\n/**\n * View\n */\nconst BlogCover:FunctionComponent<IBlogCover> = ({ coverImage, copyright }) => {\n  // set a ref on the cover container to create the visual effect\n  const coverEl = useRef<HTMLDivElement>(null)\n\n  // set a ref to manage the parallax effect\n  const parallax = useRef<IParallax>({\n    scroll: 0,\n    mov: 0,\n    elBound: null,\n  })\n\n  // handle event\n  const handleScroll = (event:Event) => {\n    event.preventDefault()\n\n    if ( \n      !coverImage \n      || !coverEl.current \n      || !parallax.current.elBound\n      || window.scrollY > parallax.current.elBound.height\n    ) return\n    \n    // get scroll\n    const scroll = Math.max(0, Math.round(window.scrollY * parallaxStrength))\n\n    // get scroll distance \n    const mov = Math.round(scroll - parallax.current.scroll)\n\n    // calcul opacity\n    const opacity = 1 - (1 / parallax.current.elBound.height) * scroll * parallaxStrength\n\n    // apply conditional style\n    if ( \n      Math.sign(mov) === Math.sign(parallax.current.mov) \n      || parallax.current.scroll === 0 \n    ){\n      coverEl.current.style.transform = `translate3d(0, ${scroll}px, 0)`\n      coverEl.current.style.opacity = opacity.toString()\n    }\n\n    // apply new values\n    parallax.current.scroll = scroll\n    parallax.current.mov = mov\n  }\n\n  // init parallax\n  useEffect(() => {\n    if ( parallax.current.elBound || !coverEl.current ) return  \n    \n    parallax.current.elBound = coverEl.current.getBoundingClientRect()\n  }, [coverEl])\n\n  // manage parallax effect\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll)\n    \n    return () => window.removeEventListener(\"scroll\", handleScroll)\n  }, [])\n\n  return (\n    <div style={{ overflow: \"hidden\" }}>\n      <div className={cx(coverStyle, \"bg-primary\")}>\n        <div className=\"container-reading\">\n          <div className={coverImgStyles} ref={coverEl}>\n            <GatsbyImage image={coverImage} title={`Source de l'image: ${copyright || 'inconnue'}`} alt='' />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n\nexport default BlogCover\n\n","import React, { FunctionComponent } from 'react'\nimport { cx, css } from \"@emotion/css\";\nimport Avatar from 'components/3dAvatar'\n\ninterface IPublisherInfo extends IPost {}\n\nconst avatarBg = css`\n  background: radial-gradient(circle at bottom, #ffffff20, transparent 25%, transparent 25%),\n      linear-gradient(365deg, rgba(0, 1, 179, 0.2), rgba(0, 0, 255, 0) 50%),\n      var(--downlight);\n`\n\nconst PublisherInfo:FunctionComponent<IPublisherInfo> = ({ date, category }) => {\n  return (\n    <div className='row no-gutters pt-4 mt-6 mb-4 border-top'>\n      <div className='col-1 d-flex'>\n        <div className={cx('w-100 my-auto p-1 position-relative cursor-grab rounded-circle', avatarBg)}>\n          <Avatar /> \n        </div>\n      </div>\n      <div className='col d-flex'>\n        <div className='my-auto pl-3 py-2 pr-2'>\n          Publié par Aurélien Dudonney le {date} \n        </div>\n      </div>\n    </div>\n  ) \n}\n\nexport default PublisherInfo","import React, { FunctionComponent, useEffect, useState, useRef } from \"react\"\nimport { graphql } from \"gatsby\"\nimport { getImage } from \"gatsby-plugin-image\"\nimport { MDXProvider } from \"@mdx-js/react\"\nimport { MDXRenderer } from \"gatsby-plugin-mdx\"\nimport mdxComponents from \"services/mdxConvertor\"\nimport { formatPost } from \"services/formaters\"\nimport Layout from \"partials/layouts/layout-page\"\nimport Comments from \"partials/blog/comments\"\nimport Cover from \"partials/blog/cover\"\nimport PublisherInfo from 'components/publisherInfo'\n\n/**\n * Types\n */\ninterface IBlogTemplate {\n  data: IMdxData\n}\n\n/**\n * QUery\n */\nexport const pageQuery = graphql`\n  query($slug: String!) {\n    mdx(fields: { slug: { eq: $slug } }) {\n      id\n      body\n      wordCount {\n        words\n      }\n      frontmatter {\n        title\n        category\n        date\n        coverCopy,\n        cover {\n          childImageSharp {\n            gatsbyImageData(layout: FULL_WIDTH)\n          }\n        }\n      }\n    }\n  }\n`\n\n\n/**\n * View\n */\nconst BlogTemplate:FunctionComponent<IBlogTemplate> = ({ data }) => {\n  const readingArea = useRef<HTMLDivElement>(null)\n  const [wordsCounter, setWordsCounter] = useState<number>(0)\n\n  // format mdx data\n  const model = formatPost(data.mdx)\n\n  // cover image\n  const coverImage = model.cover && getImage(model.cover)\n\n  // metadata\n  const meta:Partial<ISEO> = {\n    type: \"article\",\n    category: model.category,\n  }\n\n  \n  // wordscounter\n  const handleWordsCounter = () => {\n    if (!readingArea.current) return\n\n    let content = readingArea.current.getBoundingClientRect()\n    let scrollY =  content.y * -1\n    let windowH = window.innerHeight\n\n    if (scrollY > 0 && scrollY < (content.height + windowH) ) {\n      setWordsCounter(Math.floor((100 / (content.height - windowH)) * scrollY))\n    }\n  }\n\n  // init wordsCounter event \n  useEffect(() => {\n    window.addEventListener('scroll', handleWordsCounter)\n    return () => window.removeEventListener('scroll', handleWordsCounter)\n  }, [])\n \n  return (\n    <Layout meta={meta}>\n      <div className=\"reading-time\">\n        <div className=\"reading-time-range\" style={{ width: `${wordsCounter}%` }}></div>  \n      </div>\n  \n      {/* cover */}  \n      {coverImage && (\n        <Cover coverImage={coverImage} copyright={model.coverCopy} />\n      )}\n\n      {/* content */}\n      <div className=\"container mt-2 mb-2\">\n        {/* title */}\n        {model.title && (\n          <h1 className=\"h1 h-reading mb-2 mb-sm-3 text-center\">\n            {model.title}\n          </h1>\n        )}\n\n        {/* date & duration */}\n        <div className=\"container-reading\">\n          {/* body */}\n          {model.body && (\n            <div ref={readingArea}>\n              <MDXProvider components={mdxComponents}>\n                <MDXRenderer>{model.body}</MDXRenderer>\n              </MDXProvider>\n            </div>\n          )}\n\n          {/* author */}\n          <PublisherInfo {...model} />\n        </div>\n      </div>\n      <div className=\"bg-downlight\">\n        <div className=\"container pt-3 pb-1\">\n          {/* comments */}\n          <div className=\"p-1 border rounded shadow bg-white\">\n            <Comments />\n          </div>\n        </div>\n      </div>\n    </Layout> \n  )\n}\n\n\nexport default BlogTemplate"],"sourceRoot":""}